import{r as s,f as N,u as $,j as A,a as v}from"./index-d47d5f8f.js";import{a as F,b as P}from"./useUpdate-79dd3dc7.js";function j(){const e=s.useRef(0),t=s.useRef(null),[c,i]=s.useState({x:0,y:0,width:0,height:0,top:0,bottom:0,left:0,right:0}),l=s.useMemo(()=>new ResizeObserver(d=>{const r=d[0];r&&(cancelAnimationFrame(e.current),e.current=requestAnimationFrame(()=>t.current&&i(r.contentRect)))}),[]);return s.useEffect(()=>(t.current&&l.observe(t.current),()=>{l==null||l.disconnect(),e.current&&cancelAnimationFrame(e.current)}),[t.current]),[t,c]}const L=e=>{var c;const[t]=e;return Array.isArray(e)?((c=e.find(i=>!i.disabled))==null?void 0:c.value)??(t==null?void 0:t.value)??t??null:null},k=s.memo(e=>{var y;const[t,c]=s.useState({width:0,height:0,translate:[0,0]}),[i,l]=F({init:e.init||L(e.options),value:e.value,onChange:e.onChange}),[d,r]=s.useState(!1),[g,b]=j(),f=N("seg"),m=s.useRef({}),R=s.useRef();s.useLayoutEffect(()=>{R.current?!d&&r(!0):(R.current=!0,r(!1))},[]),s.useEffect(()=>{if(i in m.current&&g.current){const n=m.current[i],u=n.getBoundingClientRect(),a=n.offsetWidth/u.width,o=u.width*a||0,C=u.height*a||0,h=4,E=b.width-n.parentElement.offsetLeft+h-o,S=n.parentElement.offsetLeft-h;c({width:o,height:C,translate:[t.dir==="rtl"?E:S,n.parentElement.offsetTop-h]})}},[i,b]);const w=P(()=>({width:t==null?void 0:t.width,height:t==null?void 0:t.height,transform:`translate(${t.translate[0]}px, ${t.translate[1]}px)`}),[t]),x=$(n=>{l(n.value),e==null||e.onChange(n)});return A("div",{className:"segment",ref:g,onClick:n=>n.stopPropagation(),style:e==null?void 0:e.style,children:[v("span",{className:"segment-active",style:w}),(y=e.options)==null?void 0:y.map((n,u)=>{const a=typeof n=="string"?{label:n,value:n}:n;return A("div",{className:"segment-item",children:[v("input",{name:f,disabled:e.disabled||a.disabled||void 0,type:"radio",value:a.value,id:`${f}-${a.value}`,className:"segment-item-input",checked:i===a.value,onChange:x.bind(null,a)}),v("label",{className:"segment-item-label",style:{"--segment-font":e.fontSize},"data-active":i===a.value&&!(e.disabled||a.disabled)||void 0,"data-disabled":e.disabled||a.disabled||void 0,htmlFor:`${f}-${a.value}`,ref:o=>m.current[a.value]=o,children:a.label})]},a.value)})]})});export{k as S};
